stateDiagram-v2
    %% ======================
    %% State Definitions
    %% ======================
    [*] --> TrialCreated : ðŸŽ‰ Create Tenant
    
    state TrialStates {
        TrialCreated --> TrialActive : âœ… Activate Trial
        TrialActive --> TrialExpired : â³ Trial Period Ends
        TrialActive --> Subscribed : ðŸ’³ Purchase Subscription
        TrialExpired --> Subscribed : ðŸ’³ Purchase Subscription
        TrialExpired --> Deactivated : â›” Grace Period Ends
    }
    
    state SubscriptionStates {
        Subscribed --> Active : ðŸ“Œ Subscription Active
        Active --> PendingRenewal : ðŸ”„ Before Renewal Date
        PendingRenewal --> Renewed : ðŸ”„ Auto-Renewal Success
        PendingRenewal --> PaymentFailed : âŒ Payment Failure
        
        PaymentFailed --> PaymentRetry : ðŸ” Retry Payment
        PaymentRetry --> Renewed : âœ… Payment Success
        PaymentRetry --> PaymentFailed : âŒ Payment Failure Again
        
        PaymentFailed --> GracePeriod : ðŸ•’ After Multiple Failed Attempts
        GracePeriod --> Renewed : âœ… Late Payment
        GracePeriod --> Suspended : â›” Grace Period Ends
        
        Renewed --> Active : ðŸ”„ Subscription Continues
    }

    state PlanChanges {
        Active --> Upgraded : â¬†ï¸ Upgrade Plan
        Upgraded --> Active : ðŸŽ¯ New Plan Active
        
        Active --> Downgraded : â¬‡ï¸ Downgrade Plan
        Downgraded --> Active : ðŸŽ¯ New Plan Active
    }
    
    state CancellationStates {
        Active --> PendingCancellation : âŒ Cancel Subscription
        PendingCancellation --> Cancelled : ðŸ“… End of Billing Period
        
        Suspended --> Renewed : âœ… Late Payment
        Suspended --> Deactivated : â›” After Suspension Period
        
        Cancelled --> Reactivated : ðŸ”„ Resubscribe
        Reactivated --> Active : ðŸ†• New Subscription
        
        Cancelled --> Deactivated : â›” After Grace Period
    }

    Deactivated --> [*]
